var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(a){var b=function(){};b.prototype=a;return new b};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(c){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;
$jscomp.inherits=function(a,b){a.prototype=$jscomp.objectCreate(b.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var c=$jscomp.setPrototypeOf;c(a,b)}else for(c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.superClass_=b.prototype};
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991},"es6","es3");$jscomp.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};
$jscomp.assign="function"==typeof Object.assign?Object.assign:function(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(d)for(var e in d)$jscomp.owns(d,e)&&(a[e]=d[e])}return a};$jscomp.polyfill("Object.assign",function(a){return a||$jscomp.assign},"es6","es3");var RpcWsClient=function(a){var b=EventEmitter.call(this)||this;b.url=a;b.ws=null;return b};$jscomp.inherits(RpcWsClient,EventEmitter);
RpcWsClient.prototype.connect=function(){if(this.isClosed()){var a=this;this.ws=new WebSocket(this.url);this.ws.onopen=function(b){a.emit("ws.open",b)};this.ws.onmessage=function(b){var c=JSON.parse(b.data);a.emit("ws.message."+c.id,c,c.id,b)};this.ws.onclose=function(b){a.emit("ws.close",b);a.close()};this.ws.onerror=function(b){a.emit("ws.error",b)}}};RpcWsClient.prototype.close=function(){this.canClose()&&this.ws.close();this.ws=null};
RpcWsClient.prototype.send=function(a,b){a=Object.assign(a,{id:Math.floor(Math.random()*(Number.MAX_SAFE_INTEGER-1+1))+1,jsonrpc:"2.0"});this.sendStringData(JSON.stringify(a),a.id,b)};RpcWsClient.prototype.sendStringData=function(a,b,c){if(this.ws&&this.isOpen()){if(c){var d=this;this.on("ws.message."+b,function(a,b,f){a.error?c(a.error):c(null,a.result);d.off("es.message."+b)})}this.ws.send(a)}};RpcWsClient.prototype.isOpen=function(){return this.ws&&this.ws.readyState===WebSocket.OPEN};
RpcWsClient.prototype.isClosed=function(){return!this.ws||this.ws.readyState===WebSocket.CLOSED};RpcWsClient.prototype.canClose=function(){return this.ws&&(this.ws.readyState===WebSocket.CONNECTING||this.isOpen())};
