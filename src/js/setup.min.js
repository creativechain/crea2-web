"use strict";(function(){document.addEventListener("DOMContentLoaded",function(){creaEvents.emit("crea.content.prepare");creaEvents.emit("crea.content.loaded");var b=Session.getAlive();if(b){b.login(function(f,g){if(f){console.error(f);if(f===Errors.USER_LOGIN_ERROR){b.logout()}creaEvents.emit("crea.session.login",false)}else{var e=2;var h=function h(j,i){--e;if(e===0){creaEvents.emit("crea.session.login",j,i)}};var d=[];var c=[];crea.api.getFollowing(b.account.username,"","blog",1000,function(j,i){if(!catchError(j)){i.following.forEach(function(k){d.push(k.following)});g.user.followings=d;h(b,g)}});crea.api.getFollowing(b.account.username,"","ignore",1000,function(j,i){if(!catchError(j)){i.following.forEach(function(k){c.push(k.following)});g.user.blockeds=c;h(b,g)}})}})}else{creaEvents.emit("crea.session.login",false)}});function a(c){if(c){CreaCookies.set("creary.username",c.account.username)}else{CreaCookies.remove("creary.username")}var b=navigator.language.toLowerCase().split("-")[0];CreaCookies.set("creary.language",b)}creaEvents.on("crea.session.login",a);creaEvents.on("crea.session.update",a);creaEvents.on("crea.session.logout",a);creaEvents.on("crea.modal.ready",function(b){setTimeout(function(){if(b){$(".all-page-modals #modal-login").remove();$(".all-page-modals #modal-login-d").remove()}mr.modals.documentReady($)},500)});creaEvents.on("crea.dom.ready",function(){$.holdReady(false);$(window).scroll(function(e){var d=$(document).height();var c=$(window).height()+$(window).scrollTop();var b=(d-c)/d;if(b<=0.01){creaEvents.emit("crea.scroll.bottom")}});$("input, textarea").each(function(c,d){var b=parseInt($(d).attr("maxlength"));$(d).keypress(function(g){var f=g.target.value.length;if(g.charCode>0&&f===b){cancelEventPropagation(g)}})});$('[data-toggle="popover"]').popover();creaEvents.emit("crea.modal.ready")})})();