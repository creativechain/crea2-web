"use strict";(function(){var b;function d(h,g,f){if(!b){b=new Vue({el:"#witnesses",data:{lang:lang,session:h,account:g,state:f},methods:{onVote:function e(){updateUserSession()}}})}else{b.session=h;b.account=g;b.state=f}creaEvents.emit("crea.dom.ready","publish")}function c(f,e){crea.api.getState("/~witnesses",function(i,g){if(!catchError(i)){var h=Object.keys(g.witnesses);h.sort(function(k,j){return g.witnesses[j].votes-g.witnesses[k].votes});g.ordered_witnesses=h;d(f,e,g)}})}function a(f,e){if(f){crea.api.getAccounts([f.account.username],function(i,g){if(i){console.error(i);c(f,e)}else{var h=g[0];e.user.witness_votes=h.witness_votes;c(f,e)}})}else{c(f,e)}}creaEvents.on("crea.session.login",function(f,e){a(f,e)});creaEvents.on("crea.session.update",function(f,e){a(f,e)})})();