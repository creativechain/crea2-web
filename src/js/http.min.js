"use strict";function _instanceof(b,a){if(a!=null&&typeof Symbol!=="undefined"&&a[Symbol.hasInstance]){return a[Symbol.hasInstance](b)}else{return b instanceof a}}function _typeof(b){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){a=function a(c){return typeof c}}else{a=function a(c){return c&&typeof Symbol==="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c}}return a(b)}function _classCallCheck(a,b){if(!_instanceof(a,b)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(d,b){for(var a=0;a<b.length;a++){var c=b[a];c.enumerable=c.enumerable||false;c.configurable=true;if("value" in c){c.writable=true}Object.defineProperty(d,c.key,c)}}function _createClass(c,a,b){if(a){_defineProperties(c.prototype,a)}if(b){_defineProperties(c,b)}return c}function _possibleConstructorReturn(a,b){if(b&&(_typeof(b)==="object"||typeof b==="function")){return b}return _assertThisInitialized(a)}function _assertThisInitialized(a){if(a===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return a}function _getPrototypeOf(b){a=Object.setPrototypeOf?Object.getPrototypeOf:function a(c){return c.__proto__||Object.getPrototypeOf(c)};return a(b)}function _inherits(b,a){if(typeof a!=="function"&&a!==null){throw new TypeError("Super expression must either be null or a function")}b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,writable:true,configurable:true}});if(a){_setPrototypeOf(b,a)}}function _setPrototypeOf(b,a){c=Object.setPrototypeOf||function c(e,d){e.__proto__=d;return e};return c(b,a)}var HttpClient=function(e){_inherits(h,e);function h(i){var j;_classCallCheck(this,h);j=_possibleConstructorReturn(this,_getPrototypeOf(h).call(this));j.id=randomNumber(0,Number.MAX_SAFE_INTEGER);j.url=i;j.params=null;j.method=null;j.headers={};j.mimeType="multipart/form-data";j.contentType=false;j.xhr=null;return j}_createClass(h,[{key:"__exec",value:function d(){var l=this;var i={url:this.url,method:this.method,headers:this.headers,mimeType:this.mimeType,contentType:this.contentType,crossDomain:true,processData:false};if(this.params){if(this.method==="GET"){i.processData=true;i.data=this.params}else{var k=new FormData();var j=Object.keys(this.params);j.forEach(function(m){k.append(m,l.params[m])});i.data=k}}this.xhr=$.ajax(i).done(function(n,o,m){l.emit("done"+l.id,n,o,m)}).fail(function(m,o,n){l.emit("fail"+l.id,m,o,n)}).always(function(n,o,m){l.emit("always"+l.id,n,o,m)})}},{key:"when",value:function a(i,j){this.on(i+this.id,j);return this}},{key:"setHeaders",value:function f(i){this.headers=i;return this}},{key:"post",value:function c(i){this.params=i;this.method="POST";this.__exec();return this}},{key:"get",value:function b(i){this.params=i;this.method="GET";this.__exec();return this}},{key:"abort",value:function g(){if(this.xhr){this.xhr.abort()}}}]);return h}(EventEmitter);