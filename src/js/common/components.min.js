var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var f=a[d];f in c||(c[f]={});c=c[f]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,c){var b=$jscomp.checkStringArgs(this,a,"startsWith");a+="";var f=b.length,e=a.length;c=Math.max(0,Math.min(c|0,b.length));for(var g=0;g<e&&c<f;)if(b[c++]!=a[g++])return!1;return g>=e}},"es6","es3");$jscomp.polyfill("Object.is",function(a){return a?a:function(a,c){return a===c?0!==a||1/a===1/c:a!==a&&c!==c}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,c){var b=this;b instanceof String&&(b=String(b));var f=b.length;c=c||0;for(0>c&&(c=Math.max(c+f,0));c<f;c++){var e=b[c];if(e===a||Object.is(e,a))return!0}return!1}},"es7","es3");$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,c){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,c||0)}},"es6","es3");
var LIKE_STATE={LIKE_OP:0,NO_LIKE:1,LIKED:2,NO_LIKE_END:3,LIKED_END:4},WITNESS_STATE={VOTE_OP:0,NO_VOTE:1,VOTED:2,NO_VOTE_END:3,VOTED_END:4},RECOMMEND_STATE={RECOMMEND_OP:0,RECOMMENDED:1,NO_RECOMMENDED:2},FOLLOW_STATE={NO_FOLLOWING:0,UNFOLLOWED:1,FOLLOWING:2,FOLLOWED:3,UNFOLLOWING_OP:4,FOLLOWING_OP:5};
Vue.component("autocomplete",{template:'<div>   <input ref="countryInput" autocomplete="none" type="text" v-bind:placeholder="placeholder" v-on:input="onInput" v-on:focus="onFocus" v-on:focusout="onBlur">   <div class="autocomplete-items">       <template v-for="i in matchedItems" >           <div v-on:click="selectItem(i)">               <p v-if="i.textMatched">                   <strong >{{ i.textMatched }}</strong>{{ i.textUnmatched }} (+{{ i.callingCodes[0] }})               </p>               <p v-else>                   {{ i.name }} (+{{ i.callingCodes[0] }})               </p>           </div>       </template>   </div></div>',props:{items:Array,
placeholder:String},data:function(){return{value:"",selectedItem:null,matchedItems:[]}},methods:{onFocus:function(){this.matchedItems=this.items},onBlur:function(){var a=this;setTimeout(function(){a.matchedItems=[]},200)},onInput:function(a){a=a.target.value.toLowerCase();for(var b=[],c=0;c<this.items.length;c++){var d=this.items[c];d.name.toLowerCase().startsWith(a)&&(d.textMatched=d.name.substr(0,a.length),d.textUnmatched=d.name.substr(a.length,d.name.length),b.push(d))}this.matchedItems=b},selectItem:function(a){this.selectedItem=
a;this.$refs.countryInput.value=a.name+" (+"+a.callingCodes[0]+")";this.matchedItems=[];this.$emit("item",a)}}});
Vue.component("recommend-post",{template:'<ul class="ul-recommended-post">   <li>       <a href="#0" class="d-flex" v-on:click="makeRecommend">           \x3c!-- Para activar el parpadeo cuando alguien hace click en el icono, poner esta clases: pre-recommended --\x3e           \x3c!-- Hay dos estados: icon-recommended-post (por defecto), icon-recommended-post-active cuando esta recomendado --\x3e           <div v-bind:class="recommendedClasses" v-on:mouseover="onHover(true)" v-on:mouseleave="onHover(false)"></div>           <span>({{ countRecommended() }})</span>       </a>   </li></ul>',props:{post:Object,
session:[Object,Boolean],user:[Object,Boolean]},watch:{post:{immediate:!0,deep:!0,handler:function(a,b){this.$forceUpdate()}},user:{immediate:!0,deep:!0,handler:function(a,b){this.$forceUpdate()}}},computed:{recommendedClasses:function(){return{"icon-recommended-post":!this.hover&&this.state===RECOMMEND_STATE.NO_RECOMMENDED,"icon-recommended-post-active":this.state!==RECOMMEND_STATE.NO_RECOMMENDED||this.hover,"pre-recommended":this.state===RECOMMEND_STATE.RECOMMEND_OP}}},data:function(){return{lang:lang,
states:RECOMMEND_STATE,state:RECOMMEND_STATE.NO_RECOMMENDED,hover:!1}},methods:{onHover:function(a){this.hover=a},isOwn:function(){return this.session?this.session.account.username===this.post.author:!1},isRecommendedByUser:function(){return this.post.reblogged_by.includes(this.user.name)},countRecommended:function(){return this.post.reblogged_by.length},makeRecommend:function(a){cancelEventPropagation(a);var b=this;this.isRecommendedByUser()||this.state===this.states.RECOMMEND_OP||(this.state=RECOMMEND_STATE.RECOMMEND_OP,
recommendPost(b.post.author,b.post.permlink,!0,function(a,d){a?(b.state=RECOMMEND_STATE.NO_RECOMMENDED,b.$emit("recommend",a,null,b.post)):(b.post.reblogged_by.push(b.session.account.username),b.state=RECOMMEND_STATE.RECOMMENDED,b.$emit("recommend",null,d,b.post))}))}},mounted:function(){this.state=this.isRecommendedByUser()?RECOMMEND_STATE.RECOMMENDED:RECOMMEND_STATE.NO_RECOMMENDED},updated:function(){this.state!==RECOMMEND_STATE.RECOMMEND_OP&&(this.state=this.isRecommendedByUser()?RECOMMEND_STATE.RECOMMENDED:
RECOMMEND_STATE.NO_RECOMMENDED)}});
Vue.component("recommend",{template:'<div>           <template v-if="session && !isOwn()">               <div v-bind:class="actionClasses" v-on:click="makeRecommend()">                   <div v-bind:class="recommendedClasses"></div>               </div>           </template>            <div v-if="feed && recommendedBy()" class="row-recommended">                <p>                   <img src="/img/recommended/recommended_icon_1.svg" alt=""> {{ lang.PUBLICATION.RECOMMENDED_BY }} <a v-bind:href="\'/@\' + recommendedBy()">@{{ recommendedBy() }}</a>                    <template v-if="countRecommended() > 1">                       {{ lang.COMMON.AND + " " + countRecommended() + " " + lang.COMMON.MORE }}                   </template>                </p>            </div></div>',props:{post:Object,
session:[Object,Boolean],user:[Object,Boolean],feed:{type:Boolean,"default":!1}},watch:{post:{immediate:!0,deep:!0,handler:function(a,b){this.$forceUpdate()}},user:{immediate:!0,deep:!0,handler:function(a,b){this.$forceUpdate()}},feed:{immediate:!0,handler:function(a,b){this.$forceUpdate()}}},computed:{recommendedClasses:function(){return{"icon-recommended":!0,"hover-recommended":this.state!==RECOMMEND_STATE.RECOMMENDED,"my-active":this.state===RECOMMEND_STATE.RECOMMENDED}},actionClasses:function(){return{hidden:!this.hover&&
this.state!==RECOMMEND_STATE.RECOMMEND_OP,"row-circle-recommended":!0,"pre-recommended":this.state===RECOMMEND_STATE.RECOMMEND_OP,parpadeo:this.state===RECOMMEND_STATE.RECOMMEND_OP}}},data:function(){return{lang:lang,states:RECOMMEND_STATE,state:RECOMMEND_STATE.NO_RECOMMENDED,hover:!1}},methods:{isOwn:function(){return this.session?this.session.account.username===this.post.author:!1},isRecommendedByUser:function(){return this.post.reblogged_by.includes(this.user.name)},recommendedBy:function(){var a=
this,b=!1;this.user.followings.forEach(function(c){a.post.reblogged_by.includes(c)&&(b=c)});return b},countRecommended:function(){var a=this,b=0;this.user.followings.forEach(function(c){a.post.reblogged_by.includes(c)&&(b+=1)});return b},makeRecommend:function(){var a=this;this.isRecommendedByUser()||this.state===this.states.RECOMMEND_OP||(this.state=RECOMMEND_STATE.RECOMMEND_OP,recommendPost(a.post.author,a.post.permlink,!0,function(b,c){b?(a.state=RECOMMEND_STATE.NO_RECOMMENDED,a.$emit("recommend",
b,null,a.post)):(a.post.reblogged_by.push(a.session.account.username),a.state=RECOMMEND_STATE.RECOMMENDED,a.$emit("recommend",null,c,a.post))}))}},mounted:function(){var a=this;this.state=this.isRecommendedByUser()?RECOMMEND_STATE.RECOMMENDED:RECOMMEND_STATE.NO_RECOMMENDED;$(this.$el).parent().hover(function(){a.hover=!0;a.$forceUpdate()},function(){a.hover=!1;a.$forceUpdate()})},updated:function(){this.state!==RECOMMEND_STATE.RECOMMEND_OP&&(this.state=this.isRecommendedByUser()?RECOMMEND_STATE.RECOMMENDED:
RECOMMEND_STATE.NO_RECOMMENDED)}});
Vue.component("post-amount",{template:"<span class='amount-price'>    <template v-if='symbefore'>       {{ assetPart(value, 'sym') }}       {{ assetPart(value, 'int') + '.'  }}       <span>{{ assetPart(value, 'dec') }}</span>   </template>   <template v-else>       {{ assetPart(value, 'int') + '.' }}       <span>{{ assetPart(value, 'dec') }}</span>       {{ assetPart(value, 'sym') }}   </template></span>",props:{value:[Number,String,Object],symbol:[String],symbefore:{type:Boolean,"default":!1}},methods:{assetPart:function(a,
b){a=Asset.parse(a);switch(b){case "int":return a.toPlainString(null,!1).split(".")[0];case "dec":return a.toPlainString(null,!1).split(".")[1];case "sym":return this.symbol?this.symbol:a.asset.symbol;default:return Asset.parse(a).toFriendlyString()}}}});
Vue.component("amount",{template:"<div class='amount-price'>    <span>{{ assetPart(value, 'int') + '.' }}</span>   <span>{{ assetPart(value, 'dec') }}</span>   <span>{{ assetPart(value, 'sym') }}</span></div>",props:{value:[Number,String,Object]},methods:{assetPart:function(a,b){a=Asset.parse(a);switch(b){case "int":return a.toPlainString(null,!1).split(".")[0];case "dec":return a.toPlainString(null,!1).split(".")[1];case "sym":return a.asset.symbol;default:return Asset.parse(a).toFriendlyString()}}}});
Vue.component("slider",{template:'<div class="slider slider-horizontal" v-on:mousedown="onMouseDown" v-on:mouseup="onMouseUp" v-on:mousemove="onMouse"><div class="slider-track">   <div class="slider-track-low" style="left: 0px; width: 0px;"></div>   <div class="slider-selection" v-bind:style="{ left: \'0%\', width: percentage + \'%\' }"></div>   <div class="slider-selection hidden" v-bind:style="{ right: \'0px\', width: (100 - percentage) + \'%\' }"></div></div><div class="slider-handle min-slider-handle round" v-bind:style="{left: percentage + \'%\'}" tabindex="0"></div></div>',
props:{initvalue:{type:Number,"default":0},min:{type:Number,"default":0},max:{type:Number,"default":100}},watch:{initvalue:function(a,b){console.log(a,b);this.$forceUpdate()}},data:function(){return{value:0,lastInitValue:0,percentage:0,draggable:!1}},mounted:function(){this.calcInitValue()},updated:function(){this.calcInitValue()},methods:{onMouse:function(a){a&&a.preventDefault();if(!this.draggable)return!0;var b=$(this.$el).offset();this.calcValues(a.pageX-b.left);return!0},onMouseDown:function(a){this.draggable=
!0;this.onMouse(a)},onMouseUp:function(a){this.draggable=!1},calcInitValue:function(){if(this.initvalue!==this.lastInitValue){var a=this.initvalue*this.$el.offsetWidth/this.max;this.lastInitValue=this.initvalue;this.calcValues(a)}},calcValues:function(a){a=a*this.max/this.$el.offsetWidth;var b=a/this.max*100;0>a&&(b=a=0);a>this.max&&(a=this.max,b=100);this.updateValues(a,b)},updateValues:function(a,b){this.value=a;this.percentage=b;this.$emit("change",a,b)}}});
Vue.component("post-like-big",{template:'<div v-on:mouseover="onOver(true)" v-on:mouseleave="onOver(false)" class="circle-like-post bs-popover-left"   v-bind:class="circleClasses" role="button" data-toggle="popover" data-trigger="hover" data-placement="left"    data-html="true" v-bind:title="tooltipTitle" v-bind:data-original-title="tooltipTitle" v-bind:data-content="payouts">   <div class="lds-heart size-20 size-30-like post-like" v-bind:class="likeClasses" v-on:click="makeVote">       <div></div>   </div></div>',props:{payouts:[String,
Boolean],session:[Object,Boolean],post:{type:Object}},watch:{post:{immediate:!0,deep:!0,handler:function(a,b){this.state=this.hasVote()?this.states.LIKED:this.states.NO_LIKE}}},computed:{circleClasses:function(){return{"circle-like-post-active":!this.over&&this.state===this.states.LIKED||this.over&&(this.state===this.states.NO_LIKE||this.state===this.states.NO_LIKE_END)}},likeClasses:function(){return{"like-normal":!this.over&&(this.state===this.states.NO_LIKE||this.state===this.states.NO_LIKE_END)||
this.over&&(this.state===this.states.LIKED||this.state===this.states.LIKED_END),"like-normal-activate":!this.over&&(this.state===this.states.LIKED||this.state===this.states.LIKED_END)||this.over&&(this.state===this.states.NO_LIKE||this.state===this.states.NO_LIKE_END),"active-like":this.state===this.states.LIKE_OP}},tooltipTitle:function(){return this.post.up_votes.length+" Likes"}},data:function(){return{R:R,states:LIKE_STATE,state:0,over:!1}},methods:{onOver:function(a){this.over=a},hasPaid:function(){var a=
moment(),b=toLocaleDate(this.$props.post.cashout_time);return a.isAfter(b)},getVote:function(){var a=this.$props.session,b=this.$props.post;if(a&&b){b=b.up_votes;for(var c=0;c<b.length;c++){var d=b[c];if(a.account.username===d.voter)return d}}return null},removeVote:function(a){var b=this.post;if(b){b=b.up_votes;for(var c=-1,d=0;d<b.length;d++)if(a===b[d].voter){c=d;break}-1<c&&(this.post.up_votes.slice(c,1),this.$forceUpdate())}},hasVote:function(){return null!=this.getVote()},makeVote:function(a){a&&
a.preventDefault();if(this.state!==this.states.LIKE_OP){var b=this;a=this.$props.session;var c=this.$props.post;a=a?a.account.username:null;var d=b.hasVote()?0:1E4;requireRoleKey(a,"posting",function(a,e){b.state=b.states.LIKE_OP;crea.broadcast.vote(a,e,c.author,c.permlink,d,function(a,f){a?b.$emit("vote",a,null,c):(0<d?(b.post.up_votes.push({voter:e,author:c.author,permlink:c.permlink,percent:d}),b.state=b.states.LIKED_END):(b.removeVote(e),b.state=b.states.NO_LIKE_END),b.$emit("vote",null,f,c),
a=$(".circle-like-post").attr("aria-describedby"),console.log("realTooltip",a),a=$("#"+a),0<a.length&&$(".popover-header").html(b.tooltipTitle))})})}}},mounted:function(){this.state=this.hasVote()?LIKE_STATE.LIKED:LIKE_STATE.NO_LIKE},updated:function(){this.state!==LIKE_STATE.LIKE_OP&&(this.state=this.hasVote()?LIKE_STATE.LIKED:LIKE_STATE.NO_LIKE)}});
Vue.component("post-like",{template:'<div class="text-right">   <div class="lds-heart size-20 post-like" v-bind:class="likeClasses" v-on:click="makeVote">       <div></div>   </div>   <div class="dropdown inline post-like-count">      <span class="dropdown__trigger"> {{ post.up_votes.length }}</span>       <div class="dropdown__container">           <div>               <div class="row">                   <div class="col-4 col-sm-3 col-md-6 col-lg-2 dropdown__content amount-post-view-home">                       <ul>                           <li v-for="v in (post.up_votes.length > 10 ? 10 : post.up_votes.length)">                               <a v-if="(v-1) < 10" class="text-truncate" v-bind:href="\'/@\' + post.up_votes[v-1].voter">+{{ post.up_votes[v-1].voter }}</a>                               <span v-else class="text-truncate" >+{{ "..and " + post.up_votes.length - 10  + " users"}}</span>                           </li>                       </ul>                   </div>               </div>           </div>       </div>   </div></div>',props:{session:[Object,
Boolean],post:{type:Object}},watch:{post:{immediate:!0,deep:!0,handler:function(a,b){this.state=this.hasVote()?this.states.LIKED:this.states.NO_LIKE}}},data:function(){return{R:R,states:LIKE_STATE,state:0}},computed:{likeClasses:function(){return{"like-normal":this.state===this.states.NO_LIKE||this.state===this.states.NO_LIKE_END,"like-normal-activate":this.state===this.states.LIKED||this.state===this.states.LIKED_END,"active-like":this.state===this.states.LIKE_OP}}},methods:{hasPaid:function(){var a=
moment(),b=toLocaleDate(this.$props.post.cashout_time);return a.isAfter(b)},getVote:function(){var a=this.$props.session,b=this.$props.post;if(a&&b){b=b.up_votes;for(var c=0;c<b.length;c++){var d=b[c];if(a.account.username===d.voter)return d}}return null},removeVote:function(a){var b=this.post;if(b){b=b.up_votes;for(var c=-1,d=0;d<b.length;d++)if(a===b[d].voter){c=d;break}console.log(c,a);-1<c&&(this.post.up_votes.slice(c,1),this.$forceUpdate())}},hasVote:function(){return null!=this.getVote()},makeVote:function(a){a&&
a.preventDefault();if(this.state!==this.states.LIKE_OP){var b=this;a=this.$props.session;var c=this.$props.post;a=a?a.account.username:null;var d=b.hasVote()?0:1E4;requireRoleKey(a,"posting",function(a,e){b.state=b.states.LIKE_OP;crea.broadcast.vote(a,e,c.author,c.permlink,d,function(a,f){console.log(a,f);a?b.$emit("vote",a,null,c):(0<d?(b.post.up_votes.push({voter:e,author:c.author,permlink:c.permlink,percent:d}),b.state=b.states.LIKED_END):(b.removeVote(e),b.state=b.states.NO_LIKE_END),b.$emit("vote",
null,f,c))})})}}},mounted:function(){this.state=this.hasVote()?LIKE_STATE.LIKED:LIKE_STATE.NO_LIKE},updated:function(){this.state!=LIKE_STATE.LIKE_OP&&(this.state=this.hasVote()?LIKE_STATE.LIKED:LIKE_STATE.NO_LIKE)}});
Vue.component("comment-like",{template:'<div>   <div class="lds-heart size-20 size-20-comment comment-like" v-bind:class="likeClasses" v-on:click="makeVote">       <div></div>   </div>   <div class="dropdown inline">       <span class="dropdown__trigger">{{ post.up_votes.length }}</span>       <div class="dropdown__container">           <div class="container">               <div class="row">                   <div class="col-4 col-sm-3 col-md-6 col-lg-2 dropdown__content dropdown-like-comment">                       <ul>                           <li v-for="v in (post.up_votes.length > 10 ? 10 : post.up_votes.length)">                               <a v-if="(v-1) < 10" class="text-truncate" v-bind:href="\'/@\' + post.up_votes[v-1].voter">+{{ post.up_votes[v-1].voter }}</a>                               <span v-else class="text-truncate" >+{{ "..and " + post.up_votes.length - 10  + " users"}}</span>                           </li>                       </ul>                   </div>               </div>           </div>       </div>   </div></div>',props:{session:[Object,
Boolean],post:{type:Object}},watch:{post:{immediate:!0,deep:!0,handler:function(a,b){this.state=this.hasVote()?this.states.LIKED:this.states.NO_LIKE}}},data:function(){return{R:R,states:LIKE_STATE,state:0}},computed:{likeClasses:function(){return{"like-normal":this.state===this.states.NO_LIKE||this.state===this.states.NO_LIKE_END,"like-normal-activate":this.state===this.states.LIKED||this.state===this.states.LIKED_END,"active-like":this.state===this.states.LIKE_OP}}},methods:{hasPaid:function(){var a=
moment(),b=toLocaleDate(this.$props.post.cashout_time);return a.isAfter(b)},getVote:function(){var a=this.$props.session,b=this.$props.post;if(a&&b){b=b.up_votes;for(var c=0;c<b.length;c++){var d=b[c];if(a.account.username===d.voter)return d}}return null},removeVote:function(a){var b=this.post;if(b){b=b.up_votes;for(var c=-1,d=0;d<b.length;d++)if(a===b[d].voter){c=d;break}console.log(c,a);-1<c&&(this.post.up_votes.slice(c,1),this.$forceUpdate())}},hasVote:function(){return null!=this.getVote()},makeVote:function(a){a&&
a.preventDefault();if(this.state!==this.states.LIKE_OP){var b=this;a=this.$props.session;var c=this.$props.post;a=a?a.account.username:null;var d=b.hasVote()?0:1E4;requireRoleKey(a,"posting",function(a,e){b.state=b.states.LIKE_OP;crea.broadcast.vote(a,e,c.author,c.permlink,d,function(a,f){console.log(a,f);a?b.$emit("vote",a,null,c):(0<d?(b.post.up_votes.push({voter:e,author:c.author,permlink:c.permlink,percent:d}),b.state=b.states.LIKED_END):(b.removeVote(e),b.state=b.states.NO_LIKE_END),b.$emit("vote",
null,f,c))})})}}},mounted:function(){this.state=this.hasVote()?LIKE_STATE.LIKED:LIKE_STATE.NO_LIKE},updated:function(){this.state!=LIKE_STATE.LIKE_OP&&(this.state=this.hasVote()?LIKE_STATE.LIKED:LIKE_STATE.NO_LIKE)}});
Vue.component("like",{template:'<div>   <div class="lds-heart size-20" v-bind:class="likeClasses" v-on:click="makeVote">       <div></div>   </div>   <span>{{ post.up_votes.length }}</span></div>',props:{session:[Object,Boolean],post:{type:Object}},watch:{post:{immediate:!0,deep:!0,handler:function(a,b){this.state=this.hasVote()?this.states.LIKED:this.states.NO_LIKE}}},data:function(){return{R:R,states:LIKE_STATE,state:0}},computed:{likeClasses:function(){return{"like-normal":this.state===this.states.NO_LIKE||
this.state===this.states.NO_LIKE_END,"like-normal-activate":this.state===this.states.LIKED||this.state===this.states.LIKED_END,"active-like":this.state===this.states.LIKE_OP}}},methods:{hasPaid:function(){var a=moment(),b=toLocaleDate(this.$props.post.cashout_time);return a.isAfter(b)},getVote:function(){var a=this.$props.session,b=this.$props.post;if(a&&b){b=b.up_votes;for(var c=0;c<b.length;c++){var d=b[c];if(a.account.username===d.voter)return d}}return null},removeVote:function(a){var b=this.post;
if(b){b=b.up_votes;for(var c=-1,d=0;d<b.length;d++)if(a===b[d].voter){c=d;break}console.log(c,a);-1<c&&(this.post.up_votes.slice(c,1),this.$forceUpdate())}},hasVote:function(){return null!=this.getVote()},makeVote:function(a){a&&a.preventDefault();if(this.state!==this.states.LIKE_OP){var b=this;a=this.$props.session;var c=this.$props.post;a=a?a.account.username:null;var d=b.hasVote()?0:1E4;requireRoleKey(a,"posting",function(a,e){b.state=b.states.LIKE_OP;crea.broadcast.vote(a,e,c.author,c.permlink,
d,function(a,f){console.log(a,f);a?b.$emit("vote",a,null,c):(0<d?(b.post.up_votes.push({voter:e,author:c.author,permlink:c.permlink,percent:d}),b.state=b.states.LIKED_END):(b.removeVote(e),b.state=b.states.NO_LIKE_END),b.$emit("vote",null,f,c));b.$forceUpdate()})})}}},mounted:function(){this.state=this.hasVote()?LIKE_STATE.LIKED:LIKE_STATE.NO_LIKE},updated:function(){this.state!==LIKE_STATE.LIKE_OP&&(this.state=this.hasVote()?LIKE_STATE.LIKED:LIKE_STATE.NO_LIKE)}});
Vue.component("new-like",{template:'<div class="row-likes">   <div class="d-flex w-100">       <div>           <div class="text-right">               <div class="lds-heart size-20 post-like" v-bind:class="likeClasses" v-on:click="makeVote">                   <div></div>               </div>               <div class="dropdown inline post-like-count">                   <span class="dropdown__trigger"> {{ post.up_votes.length }}</span>                   <div class="dropdown__container">                       <div class="container">                           <div class="row">                               <div class="col-4 col-sm-3 col-md-6 col-lg-2 dropdown__content amount-post-view-home">                                   <ul class="list-inline text-right">                                       <template v-for="v in (post.up_votes.length > 10 ? 10 : post.up_votes.length)">                                           <li class="list-inline-item w-100">                                               <a v-if="(v-1) < 10" v-bind:href="\'/@\' + post.up_votes[v-1].voter" class="text-truncate">+{{ post.up_votes[v-1].voter }}</a>                                               <span v-else class="text-truncate" >+{{ "..and " + post.up_votes.length - 10  + " users"}}</span>                                           </li>                                       </template>                                   </ul>                               </div>                           </div>                       </div>                   </div>               </div>           </div>       </div>   </div></div>',props:{session:[Object,
Boolean],post:{type:Object}},watch:{post:{immediate:!0,deep:!0,handler:function(a,b){this.state=this.hasVote()?this.states.LIKED:this.states.NO_LIKE}}},data:function(){return{R:R,states:LIKE_STATE,state:0}},computed:{likeClasses:function(){return{"like-normal":this.state===this.states.NO_LIKE||this.state===this.states.NO_LIKE_END,"like-normal-activate":this.state===this.states.LIKED||this.state===this.states.LIKED_END,"active-like":this.state===this.states.LIKE_OP}}},methods:{hasPaid:function(){var a=
moment(),b=toLocaleDate(this.$props.post.cashout_time);return a.isAfter(b)},getVote:function(){var a=this.$props.session,b=this.$props.post;if(a&&b){b=b.up_votes;for(var c=0;c<b.length;c++){var d=b[c];if(a.account.username===d.voter)return d}}return null},removeVote:function(a){var b=this.post;if(b){b=b.up_votes;for(var c=-1,d=0;d<b.length;d++)if(a===b[d].voter){c=d;break}console.log(c,a);-1<c&&(this.post.up_votes.slice(c,1),this.$forceUpdate())}},hasVote:function(){return null!=this.getVote()},makeVote:function(a){a&&
a.preventDefault();if(this.state!==this.states.LIKE_OP){var b=this;a=this.$props.session;var c=this.$props.post;a=a?a.account.username:null;var d=b.hasVote()?0:1E4;console.log(this.hasVote(),d);requireRoleKey(a,"posting",function(a,e){b.state=b.states.LIKE_OP;crea.broadcast.vote(a,e,c.author,c.permlink,d,function(a,f){a?b.$emit("vote",a,null,c):(0<d?(b.post.up_votes.push({voter:e,author:c.author,permlink:c.permlink,percent:d}),b.state=b.states.LIKED_END):(b.removeVote(e),b.state=b.states.NO_LIKE_END),
b.$emit("vote",null,f,c));b.$forceUpdate();console.log(a,b.state)})})}}},mounted:function(){this.state=this.hasVote()?LIKE_STATE.LIKED:LIKE_STATE.NO_LIKE},updated:function(){this.state!==LIKE_STATE.LIKE_OP&&(this.state=this.hasVote()?LIKE_STATE.LIKED:LIKE_STATE.NO_LIKE)}});
Vue.component("witness-like",{template:'<div><span class="d-flex">{{ index }}   <div class="lds-heart size-20" v-bind:class="voteClasses" v-on:click="makeVote" style="margin-top: 5px;">       <div></div>   </div></span></div>',props:{session:[Object,Boolean],account:[Object,Boolean],witness:Object,index:Number},watch:{account:{immediate:!0,deep:!0,handler:function(a,b){this.state=this.hasVote()?this.states.VOTED:this.states.NO_VOTE}}},data:function(){return{R:R,states:WITNESS_STATE,state:WITNESS_STATE.NO_VOTE}},
computed:{voteClasses:function(){return{"like-normal":this.state===this.states.NO_VOTE||this.state===this.states.NO_VOTE_END,"like-normal-activate":this.state===this.states.VOTED||this.state===this.states.VOTED_END,"active-like":this.state===this.states.VOTE_OP}}},methods:{removeVote:function(){var a=this.account.witness_votes.indexOf(this.witness.owner);-1<a&&this.account.witness_votes.splice(a,1);this.$forceUpdate()},hasVote:function(){var a=this.$props.account;return this.$props.session&&a?0<=
a.witness_votes.indexOf(this.$props.witness.owner):!1},makeVote:function(a){a&&a.preventDefault();if(this.state!==this.states.VOTE_OP){var b=this;a=this.$props.session;var c=this.$props.witness;a=a?a.account.username:null;var d=!this.hasVote();console.log("Voting for",c.owner,d);requireRoleKey(a,"active",function(a,e){b.state=b.states.VOTE_OP;crea.broadcast.accountWitnessVote(a,e,c.owner,d,function(a,e){a?b.$emit("vote",a):(d?(b.account.witness_votes.push(c.owner),b.state=b.states.VOTED_END):(b.removeVote(),
b.state=b.states.NO_VOTE_END),b.$emit("vote",null,e))})})}}},mounted:function(){this.state=this.hasVote()?this.states.VOTED:this.states.NO_VOTE},updated:function(){this.state!==this.states.VOTE_OP&&(this.state=this.hasVote()?this.states.VOTED:this.states.NO_VOTE)}});
Vue.component("btn-follow",{template:'<div v-on:click="performFollow" v-on:mouseleave="onleave" v-on:mouseover="onover" class="btn btn-sm running ld ld-ext-right font-weight-bold" v-bind:class="btnClasses">\n<div class="btn__text" v-bind:class="textClasses"></div>{{ text }}<div class="loading-button"><div class=""><svg viewBox="0 0 50 50" class="spinner"><circle cx="25" cy="25" r="22.5" class="ring"></circle> <circle cx="25" cy="25" r="22.5" class="line"></circle></svg></div></div>\n</div>',props:{session:{type:[Object,
Boolean]},account:{type:[Object,Boolean]},user:{type:String}},watch:{user:{immediate:!0,deep:!0,handler:function(a,b){this.$forceUpdate()}},account:{immediate:!0,deep:!0,handler:function(a,b){this.$forceUpdate()}}},computed:{btnClasses:function(){return{"btn--primary":this.state===this.states.NO_FOLLOWING||this.state===this.states.UNFOLLOWED||this.state===this.states.FOLLOWING_OP,"btn-following":!this.over&&(this.state===this.states.FOLLOWING||this.state===this.states.FOLLOWED)||this.state===this.states.UNFOLLOWING_OP,
"btn-unfollow":this.over&&(this.state===this.states.FOLLOWING||this.state===this.states.FOLLOWED)}},textClasses:function(){return{text__dark:!this.over&&(this.state===this.states.FOLLOWING||this.state===this.states.FOLLOWED),"ld-ring":this.state===this.states.FOLLOWING_OP||this.state===this.states.UNFOLLOWING_OP,"ld-ring-blue":this.state===this.states.UNFOLLOWING_OP}}},data:function(){return{lang:lang,over:!1,states:FOLLOW_STATE,state:FOLLOW_STATE.NO_FOLLOWING,lastState:FOLLOW_STATE.NO_FOLLOWING,
text:null}},methods:{isStateOp:function(){return this.state===this.states.FOLLOWING_OP||this.state===this.states.UNFOLLOWING_OP},isStateFollowing:function(a){return a===this.states.FOLLOWING||a===this.states.FOLLOWED},performFollow:function(){if(!this.isStateOp()){var a=this,b=this.$props.session,c=this.state;this.state=this.isStateFollowing(this.state)?this.states.UNFOLLOWING_OP:this.states.FOLLOWING_OP;if(b){var d={follower:b.account.username,following:this.$props.user,what:this.isStateFollowing(c)?
[]:["blog"]};d=["follow",d];requireRoleKey(b.account.username,"posting",function(f){crea.broadcast.customJson(f,[],[b.account.username],"follow",jsonstring(d),function(b,d){b?(a.state=c,a.$emit("follow",b)):(a.state=a.isStateFollowing(c)?a.states.UNFOLLOWED:a.states.FOLLOWED,a.$emit("follow",null,d))})})}else this.state=c,this.$emit("follow",Errors.USER_NOT_LOGGED)}},onover:function(){this.over=!0},onleave:function(){this.over=!1},isFollowing:function(){return this.session&&this.account.followings.includes(this.user)},
updateText:function(){switch(this.state){case this.states.NO_FOLLOWING:case this.states.UNFOLLOWED:this.text=this.lang.BUTTON.FOLLOW;break;case this.states.FOLLOWING:case this.states.FOLLOWED:this.text=this.over?this.lang.BUTTON.UNFOLLOW:this.lang.BUTTON.FOLLOWING;break;case this.states.FOLLOWING_OP:this.text=this.text=this.lang.BUTTON.FOLLOW;break;case this.states.UNFOLLOWING_OP:this.text=this.lang.BUTTON.FOLLOWING}}},updated:function(){this.isStateOp()||(this.state=this.isFollowing()?this.states.FOLLOWING:
this.states.NO_FOLLOWING);this.updateText()},mounted:function(){this.state=this.isFollowing()?this.states.FOLLOWING:this.states.NO_FOLLOWING;this.updateText()}});Vue.component("username",{template:'<a v-bind:href="\'/@\' + user" class="color-name"><p>{{ name || user }}</p></a>',props:{user:{type:String},name:{type:String},inline:{type:Number,"default":1}}});
Vue.component("linkname",{template:"<a v-bind:href=\"'/@' + user\" class=\"link-username\">{{ name || '@' + user }}</a>",props:{user:{type:String},name:{type:String}}});Vue.component("avatar",{template:"<div class=\"img-user-avatar\" v-bind:style=\"{ 'background-image': 'url(' + ( getDefaultAvatar(account)) + ')' }\"></div>",props:{account:{type:Object}},methods:{getDefaultAvatar:R.getAvatar}});
Vue.component("taginput",{template:'<input v-bind:id="id" class="validate-required" type="text" v-bind:value="value" v-bind:data-role="data-role" v-bind:data-options="data-options" v-bind:placeholder="placeholder" />',props:{id:{type:String},value:{type:String},"data-role":{type:String,"default":"tagsinput"},placeholder:{type:String},"data-options":{type:String}},mounted:function(){var a=$("#"+this.id);console.log("Mounted tags",a,this.id,this.options,this.role)}});
Vue.component("ckeditor",{template:'<textarea v-bind:id="id" v-bind:value="value" rows=30 cols=80></textarea>',props:{value:{type:String},id:{type:String,"default":"editor"}},beforeUpdate:function(){var a=this.id;this.value!==CKEDITOR.instances[a].getData()&&CKEDITOR.instances[a].setData(this.value)},methods:{onInput:function(a){console.log(a);this.$emit("input",!0)}},mounted:function(){var a=this,b=this.id;console.log(this.value);CKEDITOR.replace(b,{toolbarGroups:[{name:"clipboard",groups:["clipboard",
"undo"]},{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"links",groups:["links"]},{name:"styles",groups:["styles"]},{name:"paragraph",groups:"list indent blocks align bidi paragraph".split(" ")},{name:"editing",groups:["find","selection","spellchecker","editing"]},{name:"insert",groups:["insert"]},{name:"forms",groups:["forms"]},{name:"tools",groups:["tools"]},{name:"document",groups:["mode","document","doctools"]},{name:"others",groups:["others"]},"/",{name:"colors",groups:["colors"]},
{name:"about",groups:["about"]}],removeButtons:"Subscript,Superscript,PasteText,PasteFromWord,Undo,Redo,Scayt,Anchor,Image,Maximize,Source,HorizontalRule,Table,SpecialChar,Strike,RemoveFormat,NumberedList,Blockquote,About,BulletedList",disallowedContent:"img script *[on*] *[style]",format_tags:"p;h1;h2;h3;h4;pre",removeDialogTabs:"image:advanced;link:advanced",resize_enabled:!0,extraPlugins:"videodetector"}).onembedvideo=function(a,b){c.$emit("embedvideo",a,b)};CKEDITOR.instances[b].setData(this.value);
var c=this;CKEDITOR.instances[b].on("change",function(){var d=CKEDITOR.instances[b].getData();d!==a.value&&c.$emit("input",d)})},destroyed:function(){var a=this.id;CKEDITOR.instances[a]&&CKEDITOR.instances[a].destroy()}});
