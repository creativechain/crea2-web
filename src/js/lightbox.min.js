/*
 http://creativecommons.org/licenses/by/2.5/
 - Free for use in both personal and commercial projects
 - Attribution requires leaving author name, author link, and the license info intact
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,g,d){a instanceof String&&(a=String(a));for(var c=a.length,b=0;b<c;b++){var e=a[b];if(g.call(d,e,b,a))return{i:b,v:e}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,g,d){a!=Array.prototype&&a!=Object.prototype&&(a[g]=d.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,g,d,c){if(g){d=$jscomp.global;a=a.split(".");for(c=0;c<a.length-1;c++){var b=a[c];b in d||(d[b]={});d=d[b]}a=a[a.length-1];c=d[a];g=g(c);g!=c&&null!=g&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:g})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,d){return $jscomp.findInternal(this,a,d).v}},"es6","es3");
(function(){var a=jQuery,g=function(){function a(){this.fadeDuration=500;this.fitImagesInViewport=!0;this.resizeDuration=700;this.positionFromTop=50;this.showImageNumberLabel=!0;this.wrapAround=this.alwaysShowNavOnTouchDevices=!1}return a.prototype.albumLabel=function(a,e){return"Image "+a+" of "+e},a}(),d=function(){function c(a){this.options=a;this.album=[];this.currentImageIndex=void 0;this.init()}return c.prototype.init=function(){this.enable();this.build()},c.prototype.enable=function(){var b=
this;a("body").on("click","a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]",function(e){return b.start(a(e.currentTarget)),!1})},c.prototype.build=function(){var b=this;a("<div id='lightboxOverlay' class='lightboxOverlay'></div><div id='lightbox' class='lightbox'><div class='lb-outerContainer'><div class='lb-container'><img class='lb-image' src='' /><div class='lb-nav'><a class='lb-prev' href='' ></a><a class='lb-next' href='' ></a></div><div class='lb-loader'><a class='lb-cancel'></a></div></div></div><div class='lb-dataContainer'><div class='lb-data'><div class='lb-details'><span class='lb-caption'></span><span class='lb-number'></span></div><div class='lb-closeContainer'><a class='lb-close'></a></div></div></div></div>").appendTo(a("body"));
this.$lightbox=a("#lightbox");this.$overlay=a("#lightboxOverlay");this.$outerContainer=this.$lightbox.find(".lb-outerContainer");this.$container=this.$lightbox.find(".lb-container");this.containerTopPadding=parseInt(this.$container.css("padding-top"),10);this.containerRightPadding=parseInt(this.$container.css("padding-right"),10);this.containerBottomPadding=parseInt(this.$container.css("padding-bottom"),10);this.containerLeftPadding=parseInt(this.$container.css("padding-left"),10);this.$overlay.hide().on("click",
function(){return b.end(),!1});this.$lightbox.hide().on("click",function(e){return"lightbox"===a(e.target).attr("id")&&b.end(),!1});this.$outerContainer.on("click",function(e){return"lightbox"===a(e.target).attr("id")&&b.end(),!1});this.$lightbox.find(".lb-prev").on("click",function(){return b.changeImage(0===b.currentImageIndex?b.album.length-1:b.currentImageIndex-1),!1});this.$lightbox.find(".lb-next").on("click",function(){return b.changeImage(b.currentImageIndex===b.album.length-1?0:b.currentImageIndex+
1),!1});this.$lightbox.find(".lb-loader, .lb-close").on("click",function(){return b.end(),!1})},c.prototype.start=function(b){function e(a){c.album.push({link:a.attr("href"),title:a.attr("data-title")||a.attr("title")})}var c=this,h=a(window);h.on("resize",a.proxy(this.sizeOverlay,this));a("select, object, embed").css({visibility:"hidden"});this.sizeOverlay();this.album=[];var k,d=0;if(k=b.attr("data-lightbox")){k=a(b.prop("tagName")+'[data-lightbox="'+k+'"]');for(var f=0;f<k.length;f=++f)e(a(k[f])),
k[f]===b[0]&&(d=f)}else if("lightbox"===b.attr("rel"))e(b);else for(k=a(b.prop("tagName")+'[rel="'+b.attr("rel")+'"]'),f=0;f<k.length;f=++f)e(a(k[f])),k[f]===b[0]&&(d=f);b=h.scrollTop()+this.options.positionFromTop;h=h.scrollLeft();this.$lightbox.css({top:b+"px",left:h+"px"}).fadeIn(this.options.fadeDuration);this.changeImage(d)},c.prototype.changeImage=function(b){var c=this;this.disableKeyboardNav();var d=this.$lightbox.find(".lb-image");this.$overlay.fadeIn(this.options.fadeDuration);a(".lb-loader").fadeIn("slow");
this.$lightbox.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide();this.$outerContainer.addClass("animating");var h=new Image;h.onload=function(){var e,g,f,l,m,n;d.attr("src",c.album[b].link);a(h);d.width(h.width);d.height(h.height);c.options.fitImagesInViewport&&(n=a(window).width(),m=a(window).height(),l=n-c.containerLeftPadding-c.containerRightPadding-20,f=m-c.containerTopPadding-c.containerBottomPadding-120,(h.width>l||h.height>f)&&(h.width/l>h.height/
f?(g=l,e=parseInt(h.height/(h.width/g),10),d.width(g),d.height(e)):(e=f,g=parseInt(h.width/(h.height/e),10),d.width(g),d.height(e))));c.sizeContainer(d.width(),d.height())};h.src=this.album[b].link;this.currentImageIndex=b},c.prototype.sizeOverlay=function(){this.$overlay.width(a(window).width()).height(a(document).height())},c.prototype.sizeContainer=function(a,c){function b(){d.$lightbox.find(".lb-dataContainer").width(f);d.$lightbox.find(".lb-prevLink").height(l);d.$lightbox.find(".lb-nextLink").height(l);
d.showImage()}var d=this,e=this.$outerContainer.outerWidth(),g=this.$outerContainer.outerHeight(),f=a+this.containerLeftPadding+this.containerRightPadding,l=c+this.containerTopPadding+this.containerBottomPadding;e!==f||g!==l?this.$outerContainer.animate({width:f,height:l},this.options.resizeDuration,"swing",function(){b()}):b()},c.prototype.showImage=function(){this.$lightbox.find(".lb-loader").hide();this.$lightbox.find(".lb-image").fadeIn("slow");this.updateNav();this.updateDetails();this.preloadNeighboringImages();
this.enableKeyboardNav()},c.prototype.updateNav=function(){var a=!1;try{document.createEvent("TouchEvent"),a=this.options.alwaysShowNavOnTouchDevices?!0:!1}catch(e){}this.$lightbox.find(".lb-nav").show();1<this.album.length&&(this.options.wrapAround?(a&&this.$lightbox.find(".lb-prev, .lb-next").css("opacity","1"),this.$lightbox.find(".lb-prev, .lb-next").show()):(0<this.currentImageIndex&&(this.$lightbox.find(".lb-prev").show(),a&&this.$lightbox.find(".lb-prev").css("opacity","1")),this.currentImageIndex<
this.album.length-1&&(this.$lightbox.find(".lb-next").show(),a&&this.$lightbox.find(".lb-next").css("opacity","1"))))},c.prototype.updateDetails=function(){var b=this;"undefined"!=typeof this.album[this.currentImageIndex].title&&""!==this.album[this.currentImageIndex].title&&this.$lightbox.find(".lb-caption").html(this.album[this.currentImageIndex].title).fadeIn("fast").find("a").on("click",function(){location.href=a(this).attr("href")});1<this.album.length&&this.options.showImageNumberLabel?this.$lightbox.find(".lb-number").text(this.options.albumLabel(this.currentImageIndex+
1,this.album.length)).fadeIn("fast"):this.$lightbox.find(".lb-number").hide();this.$outerContainer.removeClass("animating");this.$lightbox.find(".lb-dataContainer").fadeIn(this.options.resizeDuration,function(){return b.sizeOverlay()})},c.prototype.preloadNeighboringImages=function(){this.album.length>this.currentImageIndex+1&&((new Image).src=this.album[this.currentImageIndex+1].link);0<this.currentImageIndex&&((new Image).src=this.album[this.currentImageIndex-1].link)},c.prototype.enableKeyboardNav=
function(){a(document).on("keyup.keyboard",a.proxy(this.keyboardAction,this))},c.prototype.disableKeyboardNav=function(){a(document).off(".keyboard")},c.prototype.keyboardAction=function(a){a=a.keyCode;var b=String.fromCharCode(a).toLowerCase();27===a||b.match(/x|o|c/)?this.end():"p"===b||37===a?0!==this.currentImageIndex?this.changeImage(this.currentImageIndex-1):this.options.wrapAround&&1<this.album.length&&this.changeImage(this.album.length-1):("n"===b||39===a)&&(this.currentImageIndex!==this.album.length-
1?this.changeImage(this.currentImageIndex+1):this.options.wrapAround&&1<this.album.length&&this.changeImage(0))},c.prototype.end=function(){this.disableKeyboardNav();a(window).off("resize",this.sizeOverlay);this.$lightbox.fadeOut(this.options.fadeDuration);this.$overlay.fadeOut(this.options.fadeDuration);a("select, object, embed").css({visibility:"visible"})},c}();a(function(){var a=new g;new d(a)})}).call(this);
